<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rental - Plesiran YK Rental Mobil</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="logo">
                    <h2>Plesiran.YK</h2>
                    <span>We Serve A Better Service For Your Trip</span>
                </div>
                <input type="checkbox" id="nav-toggle" class="nav-toggle">
                <label for="nav-toggle" class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </label>
                <ul class="nav-menu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="cars.html">Our Cars</a></li>
                    <li><a href="rental.html" class="active">Rental</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Rental Hero -->
    <section class="page-hero">
        <div class="container">
            <h1>Sewa Mobil</h1>
            <p>Pilih mobil yang sesuai dengan kebutuhan perjalanan Anda</p>
            <div style="margin-top: 2rem; background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 10px;">
                <p style="font-size: 1.2rem; margin: 0;"><strong>Harga sudah termasuk Driver + BBM + Mobil</strong></p>
                <p style="font-size: 1rem; margin: 0.5rem 0 0 0; opacity: 0.9;"><em>Khusus untuk City Tour Jogja</em></p>
            </div>
        </div>
    </section>

    <!-- Rental Form -->
    <section class="rental-section">
        <div class="container">
            <div class="rental-container">
                <div class="rental-form">
                    <h2>Form Pemesanan</h2>
                    <form id="rentalForm">
                        <div class="form-group">
                            <label for="carSelect">Pilih Mobil</label>
                            <select id="carSelect" required>
                                <option value="">Pilih Mobil</option>
                                <option value="hiace-commuter" data-car="Toyota Hiace Commuter" data-price="1200000">Toyota Hiace Commuter - Rp 1.200.000/hari</option>
                                <option value="hiace-premio" data-car="Toyota Hiace Premio" data-price="1600000">Toyota Hiace Premio - Rp 1.600.000/hari</option>
                                <option value="avanza-2019" data-car="Toyota Avanza Facelift 2019" data-price="600000">Toyota Avanza Facelift 2019 - Rp 600.000/hari</option>
                                <option value="avanza-2024" data-car="Toyota All New Avanza 2024" data-price="700000">Toyota All New Avanza 2024 - Rp 700.000/hari</option>
                                <option value="innova-reborn" data-car="Toyota Innova Reborn" data-price="700000">Toyota Innova Reborn - Rp 700.000/hari</option>
                                <option value="innova-zenix" data-car="Toyota Innova Zenix" data-price="900000">Toyota Innova Zenix - Rp 900.000/hari</option>
                                <option value="grand-max" data-car="Daihatsu Grand Max" data-price="550000">Daihatsu Grand Max - Rp 550.000/hari</option>
                            </select>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="startDate">Tanggal Mulai</label>
                                <input type="date" id="startDate" required>
                            </div>
                            <div class="form-group">
                                <label for="endDate">Tanggal Selesai</label>
                                <input type="date" id="endDate" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="customerName">Nama Lengkap</label>
                            <input type="text" id="customerName" required>
                        </div>

                        <div class="form-group">
                            <label for="customerPhone">Nomor Telepon</label>
                            <input type="tel" id="customerPhone" required>
                        </div>

                        <div class="form-group">
                            <label for="customerEmail">Email</label>
                            <input type="email" id="customerEmail">
                        </div>

                        <div class="form-group">
                            <label for="pickupLocation">Lokasi Penjemputan</label>
                            <select id="pickupLocation" required>
                                <option value="">Pilih Lokasi</option>
                                <option value="office" data-cost="0">Kantor Plesiran YK</option>
                                <option value="airport" data-cost="100000">Bandara Yogyakarta International Airport (Tambahan 100.000)</option>
                                <option value="station" data-cost="0">Stasiun Besar Yogyakarta</option>
                                <option value="station" data-cost="0">Stasiun Lempuyangan</option>
                                <option value="bus station" data-cost="0">Terminal Giwangan</option>
                                <option value="bus station" data-cost="0">Terminal Jombor</option>
                                <option value="hotel" data-cost="0">Hotel (Biaya Tambahan menyesuaikan Jarak)</option>
                                <option value="custom" data-cost="0">Lokasi Lainnya</option>
                            </select>
                        </div>

                        <!-- DP/Uang Muka Section -->
                        <div class="form-group">
                            <label for="dpOption">Pilihan DP/Uang Muka</label>
                            <select id="dpOption" required>
                                <option value="">Pilih DP</option>
                                <option value="30">DP 30% dari Total Harga</option>
                                <option value="50">DP 50% dari Total Harga</option>
                                <option value="deposit">DP Deposit Saja (Rp 500.000)</option>
                                <option value="full">Bayar Lunas</option>
                                <option value="custom">DP Custom</option>
                            </select>
                        </div>

                        <!-- Custom DP Amount (hidden by default) -->
                        <div class="form-group" id="customDpGroup" style="display: none;">
                            <label for="customDpAmount">Jumlah DP Custom</label>
                            <input type="number" id="customDpAmount" placeholder="Masukkan jumlah DP" min="0">
                            <small style="color: #666; font-size: 0.9rem;">Masukkan nominal DP yang diinginkan</small>
                        </div>

                        <div class="form-group">
                            <label for="notes">Catatan Tambahan</label>
                            <textarea id="notes" rows="3" placeholder="Catatan khusus atau permintaan tambahan"></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary btn-full">Pesan via WhatsApp</button>
                    </form>
                </div>

                <div class="rental-summary">
                    <h3>Detail Pemesanan</h3>
                    <div class="booking-details">
                        <div class="detail-item">
                            <span>Mobil Dipilih:</span>
                            <span id="selectedCar">-</span>
                        </div>
                        <div class="detail-item">
                            <span>Tanggal Sewa:</span>
                            <span id="rentalDates">-</span>
                        </div>
                        <div class="detail-item">
                            <span>Durasi:</span>
                            <span id="rentalDuration">- hari</span>
                        </div>
                        <div class="detail-item">
                            <span>Harga per Hari:</span>
                            <span id="dailyPrice">Rp -</span>
                        </div>
                        <div class="detail-item">
                            <span>Lokasi Penjemputan:</span>
                            <span id="pickupLocationDisplay">-</span>
                        </div>
                        <div class="detail-item total">
                            <span>Total Harga:</span>
                            <span id="totalPrice">Rp 0</span>
                        </div>
                        
                        <!-- DP Information -->
                        <div class="detail-item" id="dpInfo" style="display: none;">
                            <span>DP/Uang Muka:</span>
                            <span id="dpAmount">Rp 0</span>
                        </div>
                        <div class="detail-item" id="remainingInfo" style="display: none;">
                            <span>Sisa Pembayaran:</span>
                            <span id="remainingAmount">Rp 0</span>
                        </div>
                    </div>

                    <div class="rental-terms">
                        <h4>Syarat & Ketentuan:</h4>
                        <ul>
                            <li>Tidak Berlaku Lepas Kunci</li>
                            <li>Deposit Rp 500.000</li>
                            <li>Harga sudah termasuk Driver + BBM + Mobil</li>
                            <li>Khusus untuk City Tour Jogja</li>
                            <li>Overtime Rp 50.000/jam</li>
                            <li>DP/Uang muka wajib dibayar untuk konfirmasi booking</li>
                            <li>Sisa pembayaran dibayar saat penjemputan</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Plesiran YK Rental Mobil</h3>
                    <p>Solusi terpercaya untuk kebutuhan rental mobil Anda di Yogyakarta.</p>
                    <div class="social-links">
                        <a href="#" title="TikTok"><i class="fab fa-tiktok"></i></a>
                        <a href="https://wa.me/6285742467308" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Kontak Kami</h4>
                    <div class="contact-info">
                        <p><i class="fas fa-map-marker-alt"></i> Jl Ngrompang Banyon, RT 92 Kel. Pendowo<br>Kec. Sewon Kab. Bantul Yogyakarta 55271</p>
                        <p><i class="fas fa-phone"></i> +62 857-4246-7308</p>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Lokasi Kami</h4>
                    <div class="map-container">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3953.1234567890!2d110.3260056!3d-7.8496283!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e7af9e51c036cff%3A0x29f56ad87cf87a40!2sGembel%20Transport!5e0!3m2!1sen!2sid!4v1640000000000!5m2!1sen!2sid"
                            width="100%" 
                            height="200" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy"
                            title="Lokasi Plesiran YK Rental Mobil - Gembel Transport">
                        </iframe>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Plesiran YK Rental Mobil. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Elements
        const carSelect = document.getElementById('carSelect');
        const startDate = document.getElementById('startDate');
        const endDate = document.getElementById('endDate');
        const customerName = document.getElementById('customerName');
        const customerPhone = document.getElementById('customerPhone');
        const customerEmail = document.getElementById('customerEmail');
        const pickupLocationSelect = document.getElementById('pickupLocation');
        const dpOption = document.getElementById('dpOption');
        const customDpGroup = document.getElementById('customDpGroup');
        const customDpAmount = document.getElementById('customDpAmount');
        const notes = document.getElementById('notes');
        const rentalForm = document.getElementById('rentalForm');

        // Set minimum date to today
        const today = new Date().toISOString().split('T')[0];
        startDate.setAttribute('min', today);
        endDate.setAttribute('min', today);

        // Show/hide custom DP input
        dpOption.addEventListener('change', function() {
            if (this.value === 'custom') {
                customDpGroup.style.display = 'block';
                customDpAmount.required = true;
            } else {
                customDpGroup.style.display = 'none';
                customDpAmount.required = false;
                customDpAmount.value = '';
            }
            updateBookingDetails();
        });

        // Update end date minimum when start date changes
        startDate.addEventListener('change', function() {
            endDate.setAttribute('min', this.value);
            if (endDate.value && endDate.value < this.value) {
                endDate.value = '';
            }
            updateBookingDetails();
        });

        // Format currency
        function formatCurrency(amount) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0
            }).format(amount);
        }

        // Format date
        function formatDate(dateString) {
            if (!dateString) return '-';
            return new Date(dateString).toLocaleDateString('id-ID', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });
        }

        // Calculate DP amount
        function calculateDP(totalPrice, dpType, customAmount = 0) {
            switch(dpType) {
                case '30':
                    return Math.round(totalPrice * 0.3);
                case '50':
                    return Math.round(totalPrice * 0.5);
                case 'deposit':
                    return 500000; // Fixed deposit amount
                case 'full':
                    return totalPrice;
                case 'custom':
                    return parseInt(customAmount) || 0;
                default:
                    return 0;
            }
        }

        // Update booking details
        function updateBookingDetails() {
            const selectedOption = carSelect.options[carSelect.selectedIndex];
            const carName = selectedOption.getAttribute('data-car');
            const carPrice = parseInt(selectedOption.getAttribute('data-price')) || 0;
            
            const startDateValue = startDate.value;
            const endDateValue = endDate.value;
            const pickupLocationOption = pickupLocationSelect.options[pickupLocationSelect.selectedIndex];
            const pickupLocationText = pickupLocationOption.text;
            const pickupCost = parseInt(pickupLocationOption.getAttribute('data-cost')) || 0;
            
            // Update selected car
            document.getElementById('selectedCar').textContent = carName || '-';
            
            // Update pickup location
            document.getElementById('pickupLocationDisplay').textContent = 
                pickupLocationSelect.value && pickupLocationText !== 'Pilih Lokasi' ? pickupLocationText : '-';
            
            // Update rental dates
            if (startDateValue && endDateValue) {
                document.getElementById('rentalDates').textContent = 
                    `${formatDate(startDateValue)} s/d ${formatDate(endDateValue)}`;
            } else if (startDateValue) {
                document.getElementById('rentalDates').textContent = `${formatDate(startDateValue)} s/d -`;
            } else {
                document.getElementById('rentalDates').textContent = '-';
            }
            
            // Show daily price
            document.getElementById('dailyPrice').textContent = 
                carPrice > 0 ? formatCurrency(carPrice) : 'Rp -';
            
            // Calculate duration and total price
            if (startDateValue && endDateValue && carPrice > 0) {
                const start = new Date(startDateValue);
                const end = new Date(endDateValue);
                const timeDiff = end.getTime() - start.getTime();
                let dayDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
                
                if (dayDiff === 0) dayDiff = 1; // Minimum 1 day
                
                if (dayDiff > 0) {
                    document.getElementById('rentalDuration').textContent = `${dayDiff} hari`;
                    const totalPrice = (carPrice * dayDiff) + pickupCost;
                    document.getElementById('totalPrice').textContent = formatCurrency(totalPrice);
                    
                    // Calculate and show DP information
                    if (dpOption.value) {
                        const customAmount = dpOption.value === 'custom' ? customDpAmount.value : 0;
                        const dpAmount = calculateDP(totalPrice, dpOption.value, customAmount);
                        const remainingAmount = totalPrice - dpAmount;
                        
                        document.getElementById('dpAmount').textContent = formatCurrency(dpAmount);
                        document.getElementById('remainingAmount').textContent = formatCurrency(remainingAmount);
                        document.getElementById('dpInfo').style.display = 'flex';
                        
                        if (dpOption.value !== 'full') {
                            document.getElementById('remainingInfo').style.display = 'flex';
                        } else {
                            document.getElementById('remainingInfo').style.display = 'none';
                        }
                    } else {
                        document.getElementById('dpInfo').style.display = 'none';
                        document.getElementById('remainingInfo').style.display = 'none';
                    }
                } else {
                    document.getElementById('rentalDuration').textContent = '- hari';
                    document.getElementById('totalPrice').textContent = 'Rp 0';
                    document.getElementById('dpInfo').style.display = 'none';
                    document.getElementById('remainingInfo').style.display = 'none';
                }
            } else {
                document.getElementById('rentalDuration').textContent = '- hari';
                document.getElementById('totalPrice').textContent = 'Rp 0';
                document.getElementById('dpInfo').style.display = 'none';
                document.getElementById('remainingInfo').style.display = 'none';
            }
        }

        // Generate WhatsApp message
        function generateWhatsAppMessage() {
            const selectedOption = carSelect.options[carSelect.selectedIndex];
            const carName = selectedOption.getAttribute('data-car');
            const carPrice = parseInt(selectedOption.getAttribute('data-price')) || 0;
            
            const pickupLocationOption = pickupLocationSelect.options[pickupLocationSelect.selectedIndex];
            const pickupLocationText = pickupLocationOption.text;
            const pickupCost = parseInt(pickupLocationOption.getAttribute('data-cost')) || 0;
            
            const dpOptionText = dpOption.options[dpOption.selectedIndex].text;
            
            // Calculate duration
            const start = new Date(startDate.value);
            const end = new Date(endDate.value);
            const timeDiff = end.getTime() - start.getTime();
            let dayDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
            if (dayDiff === 0) dayDiff = 1;
            
            const totalPrice = (carPrice * dayDiff) + pickupCost;
            const customAmount = dpOption.value === 'custom' ? customDpAmount.value : 0;
            const dpAmount = calculateDP(totalPrice, dpOption.value, customAmount);
            const remainingAmount = totalPrice - dpAmount;
            
            let message = `*PEMESANAN RENTAL MOBIL PLESIRAN YK*\n\n`;
            
            // Car Details
            message += `üöó *DETAIL MOBIL*\n`;
            message += `Mobil: ${carName}\n`;
            message += `Harga per hari: ${formatCurrency(carPrice)}\n\n`;
            
            // Rental Period
            message += `üìÖ *PERIODE SEWA*\n`;
            message += `Tanggal Mulai: ${formatDate(startDate.value)}\n`;
            message += `Tanggal Selesai: ${formatDate(endDate.value)}\n`;
            message += `Durasi: ${dayDiff} hari\n\n`;
            
            // Customer Information
            message += `üë§ *BIODATA PEMESAN*\n`;
            message += `Nama: ${customerName.value}\n`;
            message += `No. Telepon: ${customerPhone.value}\n`;
            if (customerEmail.value) {
                message += `Email: ${customerEmail.value}\n`;
            }
            message += `\n`;
            
            // Pickup Location
            message += `üìç *LOKASI PENJEMPUTAN*\n`;
            message += `${pickupLocationText}\n`;
            if (pickupCost > 0) {
                message += `(Biaya tambahan: ${formatCurrency(pickupCost)})\n`;
            }
            message += `\n`;
            
            // Payment Information
            message += `üí∞ *DETAIL PEMBAYARAN*\n`;
            message += `Total Harga: ${formatCurrency(totalPrice)}\n`;
            message += `Pilihan DP: ${dpOptionText}\n`;
            message += `DP/Uang Muka: ${formatCurrency(dpAmount)}\n`;
            if (dpOption.value !== 'full') {
                message += `Sisa Pembayaran: ${formatCurrency(remainingAmount)}\n`;
            }
            message += `\n`;
            
            // Additional Notes
            if (notes.value.trim()) {
                message += `üìù *CATATAN TAMBAHAN*\n`;
                message += `${notes.value}\n\n`;
            }
            
            // Terms and Conditions
            message += `üìã *SYARAT & KETENTUAN*\n`;
            message += `‚Ä¢ Tidak Berlaku Lepas Kunci\n`;
            message += `‚Ä¢ Deposit Rp 500.000\n`;
            message += `‚Ä¢ Harga sudah termasuk Driver + BBM + Mobil\n`;
            message += `‚Ä¢ Khusus untuk City Tour Jogja\n`;
            message += `‚Ä¢ Overtime Rp 50.000/jam\n`;
            message += `‚Ä¢ DP/Uang muka wajib dibayar untuk konfirmasi booking\n`;
            if (dpOption.value !== 'full') {
                message += `‚Ä¢ Sisa pembayaran dibayar saat penjemputan\n`;
            }
            message += `\n`;
            
            message += `Mohon konfirmasi ketersediaan mobil untuk tanggal tersebut. Terima kasih! üôè`;
            
            return encodeURIComponent(message);
        }

        // Form submission
        rentalForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validate required fields
            if (!carSelect.value || !startDate.value || !endDate.value || 
                !customerName.value || !customerPhone.value || !pickupLocationSelect.value || !dpOption.value) {
                alert('Mohon lengkapi semua field yang wajib diisi!');
                return;
            }
            
            // Validate custom DP if selected
            if (dpOption.value === 'custom' && (!customDpAmount.value || customDpAmount.value <= 0)) {
                alert('Mohon masukkan jumlah DP custom yang valid!');
                return;
            }
            
            // Validate date range
            if (new Date(endDate.value) < new Date(startDate.value)) {
                alert('Tanggal selesai tidak boleh lebih awal dari tanggal mulai!');
                return;
            }
            
            // Generate and send WhatsApp message
            const message = generateWhatsAppMessage();
            const whatsappUrl = `https://wa.me/6285742467308?text=${message}`;
            window.open(whatsappUrl, '_blank');
        });

        // Add event listeners
        carSelect.addEventListener('change', updateBookingDetails);
        endDate.addEventListener('change', updateBookingDetails);
        pickupLocationSelect.addEventListener('change', updateBookingDetails);
        customDpAmount.addEventListener('input', updateBookingDetails);

        // Initial update
        updateBookingDetails();
    </script>
</body>
</html>